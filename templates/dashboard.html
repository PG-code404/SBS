<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Powerwall Scheduler Dashboard integrating Agile Octopus</title>
  <link rel="stylesheet" href="/static/style.css?v=3">
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>

</head>

<body>
  <!-- HEADER -->
  <header id="dashboard-header">
    <div id="header-left">
      <h1>Powerwall Automation</h1>
    </div>
    <div id="header-right">
      <span id="active-schedule-label">
        Active Schedule:
        <span id="active_schedule_id" class="value">{{ active_schedule_id or "None" }}</span>
      </span>
      <button id="logout-btn">Logout</button>
    </div>
  </header>

  <main>
    <!-- STATUS CARDS -->
    <section class="info-grid">
  <div class="card" id="executor-card">
    <div id="executor_status" class="value">{{ executor_status }}</div>
    <div class="label">Executor Status</div>
  </div>
</section>
    <section class="info-grid">
      <div class="card"><div class="value">{{ now }}</div><div class="label">Current Time</div></div>
      <div class="card"><div id="last_scheduler_run" class="value">{{ last_scheduler_run }}</div><div class="label">Last Scheduler Run</div></div>
      <div class="card"><div id="next_schedule_time" class="value">{{ next_schedule_time }}</div><div class="label">Next Schedule Start</div></div>
      <div class="card"><div class="value">{{ uptime }}</div><div class="label">Server Uptime</div></div>
    </section>

    <hr>

    <!-- MANUAL SCHEDULE -->
    <section>
      <h2>Add Manual Schedule</h2>
      <form id="manualForm" onsubmit="addSchedule(event)">
        <label>Start:</label>
        <input type="datetime-local" id="start_time" required>
        <label>End:</label>
        <input type="datetime-local" id="end_time" required>
        <label>Target SOC:</label>
        <input type="number" id="target_soc" value="80" min="0" max="100">
        <button type="submit">Add</button>
      </form>
    </section>

    <hr>

    <!-- UPCOMING SCHEDULES -->
    <section>
      <h2>ðŸ“… Upcoming Schedules</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr><th>ID</th><th>Start</th><th>End</th><th>Target SOC</th><th>Â£ P/KWh</th><th>Source</th><th>Delete</th></tr>
          </thead>
          <tbody id="schedule-table-body"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- Toast container -->
  <div id="toast-container"></div>

  <script src="/static/dashboard.js?v=3"></script>
  <div id="confirm-modal" class="modal">
  <div class="modal-content">
    <p id="confirm-message"></p>
    <button id="confirm-yes">Yes</button>
    <button id="confirm-no">No</button>
  </div>
  </div>

</body>
</html>
